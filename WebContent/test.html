
<!DOCTYPE html>
<html>

<head>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://cdn.oesmith.co.uk/morris-0.4.1.min.js"></script>
    <meta charset=utf-8 />
    <title>Let's rock it!</title>
</head>


<body>
    <button id="btn1">click to change data(ajax)</button>
    <button id="btn_json">get json back</button>
    <div> </div>

    <form action="responder" method="get">
        <input type="submit" value="Start Workers">
    </form>
</body>


<script>
    //this function should update related html element!
    function getLatestTweet() {

         $.ajax({
                method: "POST",
                url: "http://localhost:8080/trackingEmotion/GetLatestTweets",
                data: {
                    name: "John",
                    location: "Boston"
                },
                dataType: "html"
            })
            .done(function(msg) {
                //no latest tweet concerning the search topic
                if (msg === "null") { 
                    alert("null");
                } else {
                    alert("Data Received Saved: " + msg);
                }
            });
    }



    //this function is responsible for calling GetLatestTweets
    function myfunction() {
        
        //alert("enter my function");
            setInterval(function() {
            alert("enter break1");
                getLatestTweet();
            }, 1000 * 5) //call the GetLatestTweets Servlet every 5 seconds
    }



    $(document).ready(function() {
        $("#btn_json").click(function() {
            $.getJSON("GetLatestTweets", function(result) {
                $.each(result, function(i, field) {
                    $("div").append(field + " ");
                });
            });
        });
    });




    $('#btn1').on('click', function() {
        myfunction();
    });
</script>